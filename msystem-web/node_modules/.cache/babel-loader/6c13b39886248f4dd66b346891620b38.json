{"remainingRequest":"D:\\develop_tools\\work\\maven-work\\Yansol\\msystem-web\\node_modules\\babel-loader\\lib\\index.js!D:\\develop_tools\\work\\maven-work\\Yansol\\msystem-web\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\develop_tools\\work\\maven-work\\Yansol\\msystem-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\develop_tools\\work\\maven-work\\Yansol\\msystem-web\\src\\views\\LinePurchase.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\develop_tools\\work\\maven-work\\Yansol\\msystem-web\\src\\views\\LinePurchase.vue","mtime":1684854351460},{"path":"D:\\develop_tools\\work\\maven-work\\Yansol\\msystem-web\\babel.config.js","mtime":1681747183855},{"path":"D:\\develop_tools\\work\\maven-work\\Yansol\\msystem-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1681747155761},{"path":"D:\\develop_tools\\work\\maven-work\\Yansol\\msystem-web\\node_modules\\babel-loader\\lib\\index.js","mtime":1681747156896},{"path":"D:\\develop_tools\\work\\maven-work\\Yansol\\msystem-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1681747155761},{"path":"D:\\develop_tools\\work\\maven-work\\Yansol\\msystem-web\\node_modules\\vue-loader\\lib\\index.js","mtime":1681747158581}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport _defineProperty from \"D:/develop_tools/work/maven-work/Yansol/msystem-web/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nimport { mapActions, mapGetters, mapState } from \"vuex\";\nexport default {\n  name: 'LinePurchase',\n  data: function data() {\n    return {\n      purchaseForm: {\n        tableData: [{\n          pDate: '',\n          companyName: '',\n          companyId: '',\n          lineId: '',\n          lineType: '',\n          lineName: '',\n          totalCount: '',\n          unitPrice: ''\n        }],\n        rules: {\n          companyId: [{\n            required: true,\n            message: '請選擇進貨廠商',\n            trigger: 'change'\n          }],\n          lineId: [{\n            required: true,\n            message: '請輸入線材編號',\n            trigger: 'blur'\n          }],\n          lineType: [{\n            required: true,\n            message: '請輸入端子',\n            trigger: 'blur'\n          }],\n          lineName: [{\n            required: true,\n            message: '請輸入品項',\n            trigger: 'blur'\n          }],\n          totalCount: [{\n            required: true,\n            message: '請輸入進貨數量',\n            trigger: 'blur'\n          }],\n          unitPrice: [{\n            required: true,\n            message: '請輸入進貨單價',\n            trigger: 'blur'\n          }]\n        }\n      }\n    };\n  },\n  computed: _objectSpread({}, mapState('data', ['goodData', 'companyData', 'employeeData', 'orderData', 'returnData', 'countData'])),\n  methods: _objectSpread(_objectSpread(_objectSpread({}, mapActions('data', ['fetchGoodData', 'fetchCompanyData', 'fetchEmployeeData', 'fetchOrderData', 'fetchReturnData'])), mapActions('line', ['fetchAddLineData'])), {}, {\n    //添加一行表單\n    addTable: function addTable() {\n      var newRowData = {\n        pDate: '',\n        companyName: '',\n        lineId: '',\n        lineType: '',\n        lineName: '',\n        totalCount: '',\n        unitPrice: ''\n      };\n      this.purchaseForm.tableData.push(newRowData);\n    },\n    // 提交數據\n    submit: function submit() {\n      var _this = this;\n      this.$refs.purchaseForm.validate(function (valid) {\n        //驗證通過，執行if內的代碼\n        if (valid) {\n          // 新增新增線材資料\n          _this.fetchAddLineData(_this.purchaseForm.tableData).then(function (resp) {\n            _this.$message.success(resp.data);\n          }).catch(function (error) {\n            _this.$message.error(error.response.data);\n          });\n\n          //清空form表單的數據\n          setTimeout(function () {\n            //重置表單數據\n            _this.purchaseForm.tableData = [{\n              pDate: '',\n              companyName: '',\n              lineId: '',\n              lineType: '',\n              lineName: '',\n              totalCount: '',\n              unitPrice: ''\n            }];\n            _this.$refs.purchaseForm.resetFields();\n          }, 2000);\n        }\n      });\n    },\n    //回調函數，定義表格的序號，可用來綁定資料數組\n    rowClassName: function rowClassName(_ref) {\n      var row = _ref.row,\n        rowIndex = _ref.rowIndex;\n      row.id = rowIndex + 1;\n    },\n    //刪除一行表格\n    deleteTab: function deleteTab(data) {\n      //獲取當前行的數組位子\n      var len = data.id - 1;\n      //將此數組位子的資料刪除\n      this.purchaseForm.tableData.splice(len, 1);\n    }\n  }),\n  created: function created() {\n    this.fetchCompanyData();\n  }\n};",{"version":3,"names":["mapActions","mapGetters","mapState","name","data","purchaseForm","tableData","pDate","companyName","companyId","lineId","lineType","lineName","totalCount","unitPrice","rules","required","message","trigger","computed","_objectSpread","methods","addTable","newRowData","push","submit","_this","$refs","validate","valid","fetchAddLineData","then","resp","$message","success","catch","error","response","setTimeout","resetFields","rowClassName","_ref","row","rowIndex","id","deleteTab","len","splice","created","fetchCompanyData"],"sources":["src/views/LinePurchase.vue"],"sourcesContent":["<template>\r\n  <div class=\"manage\">\r\n    <div><span class=\"title\">線材進貨</span></div>\r\n    <div class=\"manage-header\">\r\n      <el-button type=\"primary\" @click=\"addTable\">+添加欄位</el-button>\r\n    </div>\r\n    <el-form :model=\"purchaseForm\" ref=\"purchaseForm\" :rules=\"purchaseForm.rules\" inline-message>\r\n      <div class=\"common-tabel\">\r\n        <!--    人員管理表格-->\r\n        <el-table\r\n            :data=\"purchaseForm.tableData\"\r\n            :row-class-name=\"rowClassName\"\r\n            height=\"90%\"\r\n            stripe\r\n            row-key=\"viewId\"\r\n            style=\"width: 100%\">\r\n          <el-table-column label=\"序号\" align=\"center\" prop=\"id\" width=\"50\"></el-table-column>\r\n          <el-table-column\r\n              prop=\"pDate\"\r\n              label=\"進貨日\"\r\n              width=\"160\">\r\n            <template slot-scope=\"scope\">\r\n              <!-- prop的規則: 在普通的form表單中是一個對象,prop是對象的屬性. 表格是由多個對象組成的數組,在寫prop是需要根據索引給值.這里的tableData就相當於對象的屬性 !-->\r\n              <!-- rules也要單獨給 -->\r\n              <el-form-item\r\n                  :prop=\"'tableData.' + scope.$index + '.pDate'\"\r\n                  :rules='purchaseForm.rules.pDate'>\r\n                <el-date-picker\r\n                    v-model=\"purchaseForm.tableData[scope.row.id-1].pDate\"\r\n                    value-format=\"yyyy-MM-dd\"\r\n                    placeholder=\"選擇日期\">\r\n                </el-date-picker>\r\n              </el-form-item>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column\r\n              prop= \"companyName\"\r\n              label=\"進貨廠商\"\r\n              width=\"180\">\r\n            <template slot-scope=\"scope\">\r\n              <el-form-item\r\n                  :prop=\"'tableData.' + scope.$index + '.companyId'\"\r\n                  :rules='purchaseForm.rules.companyId'>\r\n                <el-select v-model=\"purchaseForm.tableData[scope.row.id-1].companyId\" placeholder=\"請選擇\">\r\n                  <el-option\r\n                      v-for=\"item in companyData\"\r\n                      :key=\"item.companyId\"\r\n                      :label=\"item.companyName\"\r\n                      :value=\"item.companyId\">\r\n                  </el-option>\r\n                </el-select>\r\n              </el-form-item>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column\r\n              prop=\"lineId\"\r\n              label=\"線材編號\"\r\n              width=\"150\">\r\n            <template slot-scope=\"scope\">\r\n              <el-form-item\r\n                  :prop=\"'tableData.' + scope.$index + '.lineId'\"\r\n                  :rules='purchaseForm.rules.lineId'>\r\n                <el-input v-model=\"purchaseForm.tableData[scope.row.id-1].lineId\"\r\n                          oninput=\"value=value.replace(/[^\\d]/g,'')\"\r\n                          placeholder=\"請輸入線材編號\">\r\n\r\n                </el-input>\r\n              </el-form-item>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column\r\n              prop=\"lineType\"\r\n              label=\"端子\"\r\n              width=\"340\">\r\n            <template slot-scope=\"scope\">\r\n              <el-form-item\r\n                  :prop=\"'tableData.' + scope.$index + '.lineType'\"\r\n                  :rules='purchaseForm.rules.lineType'>\r\n                <el-input v-model=\"purchaseForm.tableData[scope.row.id-1].lineType\"\r\n                          placeholder=\"請輸入端子\">\r\n\r\n                </el-input>\r\n              </el-form-item>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column\r\n              prop=\"lineName\"\r\n              label=\"品項\"\r\n              width=\"340\">\r\n            <template slot-scope=\"scope\">\r\n              <el-form-item\r\n                  :prop=\"'tableData.' + scope.$index + '.lineName'\"\r\n                  :rules='purchaseForm.rules.lineName'>\r\n                <el-input v-model=\"purchaseForm.tableData[scope.row.id-1].lineName\"\r\n                          placeholder=\"請輸入品項\">\r\n\r\n                </el-input>\r\n              </el-form-item>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column\r\n              prop=\"totalCount\"\r\n              label=\"進貨數量\"\r\n              width=\"150\">\r\n            <template slot-scope=\"scope\">\r\n              <el-form-item\r\n                  :prop=\"'tableData.' + scope.$index + '.totalCount'\"\r\n                  :rules='purchaseForm.rules.totalCount'>\r\n                <el-input v-model=\"purchaseForm.tableData[scope.row.id-1].totalCount\"\r\n                          oninput=\"value=value.replace(/[^\\d]/g,'')\"\r\n                          placeholder=\"請輸入數量\">\r\n\r\n                </el-input>\r\n              </el-form-item>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column\r\n              prop=\"unitPrice\"\r\n              label=\"進貨單價\"\r\n              width=\"150\">\r\n            <template slot-scope=\"scope\">\r\n              <el-form-item\r\n                  :prop=\"'tableData.' + scope.$index + '.unitPrice'\"\r\n                  :rules='purchaseForm.rules.unitPrice'>\r\n                <el-input v-model=\"purchaseForm.tableData[scope.row.id-1].unitPrice\"\r\n                          oninput=\"value=value.trim().replace(/[^\\d.]/g,'')\"\r\n                          placeholder=\"請輸入單價\">\r\n\r\n                </el-input>\r\n              </el-form-item>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column\r\n              prop=\"addr\"\r\n              label=\"操作\"\r\n              width=\"120\">\r\n            <template slot-scope=\"scope\">\r\n              <el-button type=\"danger\" size=\"mini\" @click=\"deleteTab(scope.row)\">刪除</el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n        <el-button type=\"primary\" :plain=\"true\" class=\"submit_btn\" @click=\"submit\">提交</el-button>\r\n      </div>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {mapActions, mapGetters, mapState} from \"vuex\";\r\n\r\nexport default {\r\n  name:'LinePurchase',\r\n  data(){\r\n    return{\r\n      purchaseForm:{\r\n        tableData: [{\r\n          pDate: '',\r\n          companyName: '',\r\n          companyId: '',\r\n          lineId: '',\r\n          lineType: '',\r\n          lineName: '',\r\n          totalCount: '',\r\n          unitPrice: '',\r\n        },],\r\n\r\n        rules: {\r\n          companyId: [\r\n            { required: true, message: '請選擇進貨廠商', trigger: 'change' }\r\n          ],\r\n          lineId: [\r\n            { required: true, message: '請輸入線材編號', trigger: 'blur' }\r\n          ],\r\n          lineType: [\r\n            { required: true, message: '請輸入端子', trigger: 'blur' }\r\n          ],\r\n          lineName: [\r\n            { required: true, message: '請輸入品項', trigger: 'blur' }\r\n          ],\r\n          totalCount: [\r\n            { required: true, message: '請輸入進貨數量', trigger: 'blur' }\r\n          ],\r\n          unitPrice: [\r\n            { required: true, message: '請輸入進貨單價', trigger: 'blur' }\r\n          ],\r\n        }\r\n      },\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState('data',['goodData','companyData','employeeData','orderData','returnData','countData']),\r\n  },\r\n  methods: {\r\n    ...mapActions('data', ['fetchGoodData', 'fetchCompanyData', 'fetchEmployeeData', 'fetchOrderData', 'fetchReturnData']),\r\n    ...mapActions('line', ['fetchAddLineData']),\r\n    //添加一行表單\r\n    addTable () {\r\n      let newRowData = {\r\n        pDate: '',\r\n        companyName: '',\r\n        lineId: '',\r\n        lineType: '',\r\n        lineName: '',\r\n        totalCount: '',\r\n        unitPrice: '',\r\n      }\r\n      this.purchaseForm.tableData.push(newRowData);\r\n    },\r\n    // 提交數據\r\n    submit () {\r\n      this.$refs.purchaseForm.validate(valid => {\r\n        //驗證通過，執行if內的代碼\r\n        if(valid){\r\n          // 新增新增線材資料\r\n          this.fetchAddLineData(this.purchaseForm.tableData).then((resp) => {\r\n            this.$message.success(resp.data);\r\n          }).catch((error) => {\r\n            this.$message.error(error.response.data);\r\n          });\r\n\r\n          //清空form表單的數據\r\n          setTimeout(() => {\r\n            //重置表單數據\r\n            this.purchaseForm.tableData = [{\r\n              pDate: '',\r\n              companyName: '',\r\n              lineId: '',\r\n              lineType: '',\r\n              lineName: '',\r\n              totalCount: '',\r\n              unitPrice: '',\r\n            },];\r\n            this.$refs.purchaseForm.resetFields();\r\n          }, 2000);\r\n        }\r\n      })\r\n    },\r\n    //回調函數，定義表格的序號，可用來綁定資料數組\r\n    rowClassName({row, rowIndex}) {\r\n      row.id = rowIndex +1;\r\n      },\r\n    //刪除一行表格\r\n    deleteTab (data) {\r\n      //獲取當前行的數組位子\r\n      let len = data.id - 1;\r\n      //將此數組位子的資料刪除\r\n      this.purchaseForm.tableData.splice(len,1);\r\n    }\r\n  },\r\n  created() {\r\n    this.fetchCompanyData();\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.title{\r\n  font-size: 24px;\r\n  font-weight: bold;\r\n  border-bottom: 1px solid black;\r\n}\r\n/* 日期选择框的宽度 */\r\n.el-date-editor.el-input, .el-date-editor.el-input__inner {\r\n  width: 140px;\r\n}\r\n.el-form-item {\r\n  margin-bottom: auto;\r\n}\r\n\r\n.manage {\r\n  height: 100%;\r\n}\r\n\r\n.manage .manage-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.manage .common-tabel {\r\n  position: relative;\r\n  height: 80vh;\r\n}\r\n\r\n.manage .common-tabel .pager {\r\n  position: absolute;\r\n  bottom: 40px;\r\n  right: 20px;\r\n}\r\n.submit_btn{\r\n  margin-left: 1400px;\r\n  margin-top: 20px;\r\n}\r\n.manage .common-tabel .pager {\r\n  position: absolute;\r\n  bottom: 40px;\r\n  right: 20px;\r\n}\r\n\r\n</style>"],"mappings":";;;;;;AAoJA,SAAAA,UAAA,EAAAC,UAAA,EAAAC,QAAA;AAEA;EACAC,IAAA;EACAC,IAAA,WAAAA,KAAA;IACA;MACAC,YAAA;QACAC,SAAA;UACAC,KAAA;UACAC,WAAA;UACAC,SAAA;UACAC,MAAA;UACAC,QAAA;UACAC,QAAA;UACAC,UAAA;UACAC,SAAA;QACA;QAEAC,KAAA;UACAN,SAAA,GACA;YAAAO,QAAA;YAAAC,OAAA;YAAAC,OAAA;UAAA,EACA;UACAR,MAAA,GACA;YAAAM,QAAA;YAAAC,OAAA;YAAAC,OAAA;UAAA,EACA;UACAP,QAAA,GACA;YAAAK,QAAA;YAAAC,OAAA;YAAAC,OAAA;UAAA,EACA;UACAN,QAAA,GACA;YAAAI,QAAA;YAAAC,OAAA;YAAAC,OAAA;UAAA,EACA;UACAL,UAAA,GACA;YAAAG,QAAA;YAAAC,OAAA;YAAAC,OAAA;UAAA,EACA;UACAJ,SAAA,GACA;YAAAE,QAAA;YAAAC,OAAA;YAAAC,OAAA;UAAA;QAEA;MACA;IACA;EACA;EACAC,QAAA,EAAAC,aAAA,KACAlB,QAAA,8FACA;EACAmB,OAAA,EAAAD,aAAA,CAAAA,aAAA,CAAAA,aAAA,KACApB,UAAA,4GACAA,UAAA;IACA;IACAsB,QAAA,WAAAA,SAAA;MACA,IAAAC,UAAA;QACAhB,KAAA;QACAC,WAAA;QACAE,MAAA;QACAC,QAAA;QACAC,QAAA;QACAC,UAAA;QACAC,SAAA;MACA;MACA,KAAAT,YAAA,CAAAC,SAAA,CAAAkB,IAAA,CAAAD,UAAA;IACA;IACA;IACAE,MAAA,WAAAA,OAAA;MAAA,IAAAC,KAAA;MACA,KAAAC,KAAA,CAAAtB,YAAA,CAAAuB,QAAA,WAAAC,KAAA;QACA;QACA,IAAAA,KAAA;UACA;UACAH,KAAA,CAAAI,gBAAA,CAAAJ,KAAA,CAAArB,YAAA,CAAAC,SAAA,EAAAyB,IAAA,WAAAC,IAAA;YACAN,KAAA,CAAAO,QAAA,CAAAC,OAAA,CAAAF,IAAA,CAAA5B,IAAA;UACA,GAAA+B,KAAA,WAAAC,KAAA;YACAV,KAAA,CAAAO,QAAA,CAAAG,KAAA,CAAAA,KAAA,CAAAC,QAAA,CAAAjC,IAAA;UACA;;UAEA;UACAkC,UAAA;YACA;YACAZ,KAAA,CAAArB,YAAA,CAAAC,SAAA;cACAC,KAAA;cACAC,WAAA;cACAE,MAAA;cACAC,QAAA;cACAC,QAAA;cACAC,UAAA;cACAC,SAAA;YACA;YACAY,KAAA,CAAAC,KAAA,CAAAtB,YAAA,CAAAkC,WAAA;UACA;QACA;MACA;IACA;IACA;IACAC,YAAA,WAAAA,aAAAC,IAAA;MAAA,IAAAC,GAAA,GAAAD,IAAA,CAAAC,GAAA;QAAAC,QAAA,GAAAF,IAAA,CAAAE,QAAA;MACAD,GAAA,CAAAE,EAAA,GAAAD,QAAA;IACA;IACA;IACAE,SAAA,WAAAA,UAAAzC,IAAA;MACA;MACA,IAAA0C,GAAA,GAAA1C,IAAA,CAAAwC,EAAA;MACA;MACA,KAAAvC,YAAA,CAAAC,SAAA,CAAAyC,MAAA,CAAAD,GAAA;IACA;EAAA,EACA;EACAE,OAAA,WAAAA,QAAA;IACA,KAAAC,gBAAA;EACA;AACA"}]}