{"remainingRequest":"D:\\develop_tools\\work\\maven-work\\Yansol\\msystem-web\\node_modules\\babel-loader\\lib\\index.js!D:\\develop_tools\\work\\maven-work\\Yansol\\msystem-web\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\develop_tools\\work\\maven-work\\Yansol\\msystem-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\develop_tools\\work\\maven-work\\Yansol\\msystem-web\\src\\views\\LinePurchase.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\develop_tools\\work\\maven-work\\Yansol\\msystem-web\\src\\views\\LinePurchase.vue","mtime":1683915713979},{"path":"D:\\develop_tools\\work\\maven-work\\Yansol\\msystem-web\\babel.config.js","mtime":1681747183855},{"path":"D:\\develop_tools\\work\\maven-work\\Yansol\\msystem-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1681747155761},{"path":"D:\\develop_tools\\work\\maven-work\\Yansol\\msystem-web\\node_modules\\babel-loader\\lib\\index.js","mtime":1681747156896},{"path":"D:\\develop_tools\\work\\maven-work\\Yansol\\msystem-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1681747155761},{"path":"D:\\develop_tools\\work\\maven-work\\Yansol\\msystem-web\\node_modules\\vue-loader\\lib\\index.js","mtime":1681747158581}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport _defineProperty from \"D:/develop_tools/work/maven-work/Yansol/msystem-web/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nimport { mapActions, mapGetters, mapState } from \"vuex\";\nexport default {\n  name: 'LinePurchase',\n  data: function data() {\n    return {\n      purchaseForm: {\n        tableData: [{\n          p_date: '',\n          company_name: '',\n          line_id: '',\n          line_type: '',\n          line_name: '',\n          total_count: '',\n          unit_price: ''\n        }],\n        rules: {\n          company_name: [{\n            required: true,\n            message: '請選擇進貨廠商',\n            trigger: 'change'\n          }],\n          line_id: [{\n            required: true,\n            message: '請輸入線材編號',\n            trigger: 'blur'\n          }],\n          line_type: [{\n            required: true,\n            message: '請輸入端子',\n            trigger: 'blur'\n          }],\n          line_name: [{\n            required: true,\n            message: '請輸入品項',\n            trigger: 'blur'\n          }],\n          total_count: [{\n            required: true,\n            message: '請輸入進貨數量',\n            trigger: 'blur'\n          }],\n          unit_price: [{\n            required: true,\n            message: '請輸入進貨單價',\n            trigger: 'blur'\n          }]\n        }\n      }\n    };\n  },\n  computed: _objectSpread({}, mapState('data', ['goodData', 'companyData', 'employeeData', 'orderData', 'returnData', 'countData'])),\n  methods: _objectSpread(_objectSpread(_objectSpread({}, mapActions('data', ['fetchGoodData', 'fetchCompanyData', 'fetchEmployeeData', 'fetchOrderData', 'fetchReturnData'])), mapActions('line', ['fetchAddLineData'])), {}, {\n    //添加一行表單\n    addTable: function addTable() {\n      var newRowData = {\n        p_date: '',\n        company_name: '',\n        line_id: '',\n        line_type: '',\n        line_name: '',\n        total_count: '',\n        unit_price: ''\n      };\n      this.purchaseForm.tableData.push(newRowData);\n    },\n    // 提交數據\n    submit: function submit() {\n      var _this = this;\n      this.$refs.purchaseForm.validate(function (valid) {\n        //驗證通過，執行if內的代碼\n        if (valid) {\n          // 新增新增線材資料\n          _this.fetchAddLineData(_this.purchaseForm.tableData).then(function (resp) {\n            _this.$message.success(resp.data);\n          }).catch(function (error) {\n            _this.$message.error(error.response.data);\n          });\n\n          //清空form表單的數據\n          setTimeout(function () {\n            //重置表單數據\n            _this.purchaseForm.tableData = [{\n              p_date: '',\n              company_name: '',\n              line_id: '',\n              line_type: '',\n              line_name: '',\n              total_count: '',\n              unit_price: ''\n            }];\n            _this.$refs.purchaseForm.resetFields();\n          }, 2000);\n        }\n      });\n    },\n    //回調函數，定義表格的序號，可用來綁定資料數組\n    rowClassName: function rowClassName(_ref) {\n      var row = _ref.row,\n        rowIndex = _ref.rowIndex;\n      row.id = rowIndex + 1;\n    },\n    //刪除一行表格\n    deleteTab: function deleteTab(data) {\n      //獲取當前行的數組位子\n      var len = data.id - 1;\n      //將此數組位子的資料刪除\n      this.purchaseForm.tableData.splice(len, 1);\n    }\n  }),\n  created: function created() {\n    this.fetchCompanyData();\n  }\n};",{"version":3,"names":["mapActions","mapGetters","mapState","name","data","purchaseForm","tableData","p_date","company_name","line_id","line_type","line_name","total_count","unit_price","rules","required","message","trigger","computed","_objectSpread","methods","addTable","newRowData","push","submit","_this","$refs","validate","valid","fetchAddLineData","then","resp","$message","success","catch","error","response","setTimeout","resetFields","rowClassName","_ref","row","rowIndex","id","deleteTab","len","splice","created","fetchCompanyData"],"sources":["src/views/LinePurchase.vue"],"sourcesContent":["<template>\r\n  <div class=\"manage\">\r\n    <div class=\"manage-header\">\r\n      <el-button type=\"primary\" @click=\"addTable\">+添加欄位</el-button>\r\n    </div>\r\n    <el-form :model=\"purchaseForm\" ref=\"purchaseForm\" :rules=\"purchaseForm.rules\" inline-message>\r\n      <div class=\"common-tabel\">\r\n        <!--    人員管理表格-->\r\n        <el-table\r\n            :data=\"purchaseForm.tableData\"\r\n            :row-class-name=\"rowClassName\"\r\n            height=\"90%\"\r\n            stripe\r\n            row-key=\"viewId\"\r\n            style=\"width: 100%\">\r\n          <el-table-column label=\"序号\" align=\"center\" prop=\"id\" width=\"50\"></el-table-column>\r\n          <el-table-column\r\n              prop=\"p_date\"\r\n              label=\"進貨日\"\r\n              width=\"160\">\r\n            <template slot-scope=\"scope\">\r\n              <!-- prop的規則: 在普通的form表單中是一個對象,prop是對象的屬性. 表格是由多個對象組成的數組,在寫prop是需要根據索引給值.這里的tableData就相當於對象的屬性 !-->\r\n              <!-- rules也要單獨給 -->\r\n              <el-form-item\r\n                  :prop=\"'tableData.' + scope.$index + '.p_date'\"\r\n                  :rules='purchaseForm.rules.p_date'>\r\n                <el-date-picker\r\n                    v-model=\"purchaseForm.tableData[scope.row.id-1].p_date\"\r\n                    value-format=\"yyyy-MM-dd\"\r\n                    placeholder=\"選擇日期\">\r\n                </el-date-picker>\r\n              </el-form-item>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column\r\n              prop= \"company_name\"\r\n              label=\"進貨廠商\"\r\n              width=\"180\">\r\n            <template slot-scope=\"scope\">\r\n              <el-form-item\r\n                  :prop=\"'tableData.' + scope.$index + '.company_name'\"\r\n                  :rules='purchaseForm.rules.company_name'>\r\n                <el-select v-model=\"purchaseForm.tableData[scope.row.id-1].company_name\" placeholder=\"請選擇\">\r\n                  <el-option\r\n                      v-for=\"item in companyData\"\r\n                      :key=\"item.companyId\"\r\n                      :label=\"item.companyName\"\r\n                      :value=\"item.companyId\">\r\n                  </el-option>\r\n                </el-select>\r\n              </el-form-item>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column\r\n              prop=\"line_id\"\r\n              label=\"線材編號\"\r\n              width=\"150\">\r\n            <template slot-scope=\"scope\">\r\n              <el-form-item\r\n                  :prop=\"'tableData.' + scope.$index + '.line_id'\"\r\n                  :rules='purchaseForm.rules.line_id'>\r\n                <el-input v-model=\"purchaseForm.tableData[scope.row.id-1].line_id\"\r\n                          oninput=\"value=value.replace(/[^\\d]/g,'')\"\r\n                          placeholder=\"請輸入線材編號\">\r\n\r\n                </el-input>\r\n              </el-form-item>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column\r\n              prop=\"line_type\"\r\n              label=\"端子\"\r\n              width=\"340\">\r\n            <template slot-scope=\"scope\">\r\n              <el-form-item\r\n                  :prop=\"'tableData.' + scope.$index + '.line_type'\"\r\n                  :rules='purchaseForm.rules.line_type'>\r\n                <el-input v-model=\"purchaseForm.tableData[scope.row.id-1].line_type\"\r\n                          placeholder=\"請輸入端子\">\r\n\r\n                </el-input>\r\n              </el-form-item>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column\r\n              prop=\"line_name\"\r\n              label=\"品項\"\r\n              width=\"340\">\r\n            <template slot-scope=\"scope\">\r\n              <el-form-item\r\n                  :prop=\"'tableData.' + scope.$index + '.line_name'\"\r\n                  :rules='purchaseForm.rules.line_name'>\r\n                <el-input v-model=\"purchaseForm.tableData[scope.row.id-1].line_name\"\r\n                          placeholder=\"請輸入品項\">\r\n\r\n                </el-input>\r\n              </el-form-item>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column\r\n              prop=\"total_count\"\r\n              label=\"進貨數量\"\r\n              width=\"150\">\r\n            <template slot-scope=\"scope\">\r\n              <el-form-item\r\n                  :prop=\"'tableData.' + scope.$index + '.total_count'\"\r\n                  :rules='purchaseForm.rules.total_count'>\r\n                <el-input v-model=\"purchaseForm.tableData[scope.row.id-1].total_count\"\r\n                          oninput=\"value=value.replace(/[^\\d]/g,'')\"\r\n                          placeholder=\"請輸入數量\">\r\n\r\n                </el-input>\r\n              </el-form-item>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column\r\n              prop=\"unit_price\"\r\n              label=\"進貨單價\"\r\n              width=\"150\">\r\n            <template slot-scope=\"scope\">\r\n              <el-form-item\r\n                  :prop=\"'tableData.' + scope.$index + '.unit_price'\"\r\n                  :rules='purchaseForm.rules.unit_price'>\r\n                <el-input v-model=\"purchaseForm.tableData[scope.row.id-1].unit_price\"\r\n                          oninput=\"value=value.replace(/[^\\d]/g,'')\"\r\n                          placeholder=\"請輸入單價\">\r\n\r\n                </el-input>\r\n              </el-form-item>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column\r\n              prop=\"addr\"\r\n              label=\"操作\"\r\n              width=\"120\">\r\n            <template slot-scope=\"scope\">\r\n              <el-button type=\"danger\" size=\"mini\" @click=\"deleteTab(scope.row)\">刪除</el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n        <el-button type=\"primary\" :plain=\"true\" class=\"submit_btn\" @click=\"submit\">提交</el-button>\r\n      </div>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {mapActions, mapGetters, mapState} from \"vuex\";\r\n\r\nexport default {\r\n  name:'LinePurchase',\r\n  data(){\r\n    return{\r\n      purchaseForm:{\r\n        tableData: [{\r\n          p_date: '',\r\n          company_name: '',\r\n          line_id: '',\r\n          line_type: '',\r\n          line_name: '',\r\n          total_count: '',\r\n          unit_price: '',\r\n        },],\r\n\r\n        rules: {\r\n          company_name: [\r\n            { required: true, message: '請選擇進貨廠商', trigger: 'change' }\r\n          ],\r\n          line_id: [\r\n            { required: true, message: '請輸入線材編號', trigger: 'blur' }\r\n          ],\r\n          line_type: [\r\n            { required: true, message: '請輸入端子', trigger: 'blur' }\r\n          ],\r\n          line_name: [\r\n            { required: true, message: '請輸入品項', trigger: 'blur' }\r\n          ],\r\n          total_count: [\r\n            { required: true, message: '請輸入進貨數量', trigger: 'blur' }\r\n          ],\r\n          unit_price: [\r\n            { required: true, message: '請輸入進貨單價', trigger: 'blur' }\r\n          ],\r\n        }\r\n      },\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState('data',['goodData','companyData','employeeData','orderData','returnData','countData']),\r\n  },\r\n  methods: {\r\n    ...mapActions('data', ['fetchGoodData', 'fetchCompanyData', 'fetchEmployeeData', 'fetchOrderData', 'fetchReturnData']),\r\n    ...mapActions('line', ['fetchAddLineData']),\r\n    //添加一行表單\r\n    addTable () {\r\n      let newRowData = {\r\n        p_date: '',\r\n        company_name: '',\r\n        line_id: '',\r\n        line_type: '',\r\n        line_name: '',\r\n        total_count: '',\r\n        unit_price: '',\r\n      }\r\n      this.purchaseForm.tableData.push(newRowData);\r\n    },\r\n    // 提交數據\r\n    submit () {\r\n      this.$refs.purchaseForm.validate(valid => {\r\n        //驗證通過，執行if內的代碼\r\n        if(valid){\r\n          // 新增新增線材資料\r\n          this.fetchAddLineData(this.purchaseForm.tableData).then((resp) => {\r\n            this.$message.success(resp.data);\r\n          }).catch((error) => {\r\n            this.$message.error(error.response.data);\r\n          });\r\n\r\n          //清空form表單的數據\r\n          setTimeout(() => {\r\n            //重置表單數據\r\n            this.purchaseForm.tableData = [{\r\n              p_date: '',\r\n              company_name: '',\r\n              line_id: '',\r\n              line_type: '',\r\n              line_name: '',\r\n              total_count: '',\r\n              unit_price: '',\r\n            },];\r\n            this.$refs.purchaseForm.resetFields();\r\n          }, 2000);\r\n        }\r\n      })\r\n    },\r\n    //回調函數，定義表格的序號，可用來綁定資料數組\r\n    rowClassName({row, rowIndex}) {\r\n      row.id = rowIndex +1;\r\n      },\r\n    //刪除一行表格\r\n    deleteTab (data) {\r\n      //獲取當前行的數組位子\r\n      let len = data.id - 1;\r\n      //將此數組位子的資料刪除\r\n      this.purchaseForm.tableData.splice(len,1);\r\n    }\r\n  },\r\n  created() {\r\n    this.fetchCompanyData();\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n/* 日期选择框的宽度 */\r\n.el-date-editor.el-input, .el-date-editor.el-input__inner {\r\n  width: 140px;\r\n}\r\n.el-form-item {\r\n  margin-bottom: auto;\r\n}\r\n\r\n.manage {\r\n  height: 100%;\r\n}\r\n\r\n.manage .manage-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.manage .common-tabel {\r\n  position: relative;\r\n  height: 80vh;\r\n  /*height: 700px;*/\r\n}\r\n\r\n.manage .common-tabel .pager {\r\n  position: absolute;\r\n  bottom: 40px;\r\n  right: 20px;\r\n}\r\n.submit_btn{\r\n  margin-left: 1400px;\r\n  margin-top: 20px;\r\n}\r\n.manage .common-tabel .pager {\r\n  position: absolute;\r\n  bottom: 40px;\r\n  right: 20px;\r\n}\r\n\r\n</style>"],"mappings":";;;;;;AAmJA,SAAAA,UAAA,EAAAC,UAAA,EAAAC,QAAA;AAEA;EACAC,IAAA;EACAC,IAAA,WAAAA,KAAA;IACA;MACAC,YAAA;QACAC,SAAA;UACAC,MAAA;UACAC,YAAA;UACAC,OAAA;UACAC,SAAA;UACAC,SAAA;UACAC,WAAA;UACAC,UAAA;QACA;QAEAC,KAAA;UACAN,YAAA,GACA;YAAAO,QAAA;YAAAC,OAAA;YAAAC,OAAA;UAAA,EACA;UACAR,OAAA,GACA;YAAAM,QAAA;YAAAC,OAAA;YAAAC,OAAA;UAAA,EACA;UACAP,SAAA,GACA;YAAAK,QAAA;YAAAC,OAAA;YAAAC,OAAA;UAAA,EACA;UACAN,SAAA,GACA;YAAAI,QAAA;YAAAC,OAAA;YAAAC,OAAA;UAAA,EACA;UACAL,WAAA,GACA;YAAAG,QAAA;YAAAC,OAAA;YAAAC,OAAA;UAAA,EACA;UACAJ,UAAA,GACA;YAAAE,QAAA;YAAAC,OAAA;YAAAC,OAAA;UAAA;QAEA;MACA;IACA;EACA;EACAC,QAAA,EAAAC,aAAA,KACAjB,QAAA,8FACA;EACAkB,OAAA,EAAAD,aAAA,CAAAA,aAAA,CAAAA,aAAA,KACAnB,UAAA,4GACAA,UAAA;IACA;IACAqB,QAAA,WAAAA,SAAA;MACA,IAAAC,UAAA;QACAf,MAAA;QACAC,YAAA;QACAC,OAAA;QACAC,SAAA;QACAC,SAAA;QACAC,WAAA;QACAC,UAAA;MACA;MACA,KAAAR,YAAA,CAAAC,SAAA,CAAAiB,IAAA,CAAAD,UAAA;IACA;IACA;IACAE,MAAA,WAAAA,OAAA;MAAA,IAAAC,KAAA;MACA,KAAAC,KAAA,CAAArB,YAAA,CAAAsB,QAAA,WAAAC,KAAA;QACA;QACA,IAAAA,KAAA;UACA;UACAH,KAAA,CAAAI,gBAAA,CAAAJ,KAAA,CAAApB,YAAA,CAAAC,SAAA,EAAAwB,IAAA,WAAAC,IAAA;YACAN,KAAA,CAAAO,QAAA,CAAAC,OAAA,CAAAF,IAAA,CAAA3B,IAAA;UACA,GAAA8B,KAAA,WAAAC,KAAA;YACAV,KAAA,CAAAO,QAAA,CAAAG,KAAA,CAAAA,KAAA,CAAAC,QAAA,CAAAhC,IAAA;UACA;;UAEA;UACAiC,UAAA;YACA;YACAZ,KAAA,CAAApB,YAAA,CAAAC,SAAA;cACAC,MAAA;cACAC,YAAA;cACAC,OAAA;cACAC,SAAA;cACAC,SAAA;cACAC,WAAA;cACAC,UAAA;YACA;YACAY,KAAA,CAAAC,KAAA,CAAArB,YAAA,CAAAiC,WAAA;UACA;QACA;MACA;IACA;IACA;IACAC,YAAA,WAAAA,aAAAC,IAAA;MAAA,IAAAC,GAAA,GAAAD,IAAA,CAAAC,GAAA;QAAAC,QAAA,GAAAF,IAAA,CAAAE,QAAA;MACAD,GAAA,CAAAE,EAAA,GAAAD,QAAA;IACA;IACA;IACAE,SAAA,WAAAA,UAAAxC,IAAA;MACA;MACA,IAAAyC,GAAA,GAAAzC,IAAA,CAAAuC,EAAA;MACA;MACA,KAAAtC,YAAA,CAAAC,SAAA,CAAAwC,MAAA,CAAAD,GAAA;IACA;EAAA,EACA;EACAE,OAAA,WAAAA,QAAA;IACA,KAAAC,gBAAA;EACA;AACA"}]}