{"remainingRequest":"D:\\develop_tools\\work\\maven-work\\Yansol\\msystem-web\\node_modules\\babel-loader\\lib\\index.js!D:\\develop_tools\\work\\maven-work\\Yansol\\msystem-web\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\develop_tools\\work\\maven-work\\Yansol\\msystem-web\\src\\router\\index.js","dependencies":[{"path":"D:\\develop_tools\\work\\maven-work\\Yansol\\msystem-web\\src\\router\\index.js","mtime":1684826342801},{"path":"D:\\develop_tools\\work\\maven-work\\Yansol\\msystem-web\\babel.config.js","mtime":1681747183855},{"path":"D:\\develop_tools\\work\\maven-work\\Yansol\\msystem-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1681747155761},{"path":"D:\\develop_tools\\work\\maven-work\\Yansol\\msystem-web\\node_modules\\babel-loader\\lib\\index.js","mtime":1681747156896},{"path":"D:\\develop_tools\\work\\maven-work\\Yansol\\msystem-web\\node_modules\\eslint-loader\\index.js","mtime":1681747154294}],"contextDependencies":[],"result":["import \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.string.includes\";\n//導入vue router\nimport VueRouter from 'vue-router';\nimport Home from \"../views/Home\";\nimport UserHome from \"../views/UserHome\";\nimport LineManagement from \"../views/LineManagement\";\nimport LineProcess from \"../views/LineProcess\";\nimport UserLineProcess from \"../views/UserLineProcess\";\nimport LineProcessManagement from \"../views/LineProcessManagement\";\nimport LinePurchase from \"../views/LinePurchase\";\n// import LineReturn from '../views/LineReturn'\nimport LineShipping from \"../views/LineShipping\";\nimport Login from \"../views/Login\";\n// import Payroll from '../views/Payroll'\nimport PayrollManagement from \"../views/PayrollManagement\";\nimport PrePayroll from \"../views/PrePayroll\";\nimport WorkerManagement from \"../views/WorkerManagement\";\nimport AccountManagement from \"../views/AccountManagement\";\n// import UserInfo from '../views/UserInfo'\nimport Main from \"../views/Main\";\n\n//解決點擊兩次element ui的麵包屑報錯\nvar originalPush = VueRouter.prototype.push;\nVueRouter.prototype.push = function push(location) {\n  return originalPush.call(this, location).catch(function (err) {\n    return err;\n  });\n};\nvar router = new VueRouter({\n  routes: [{\n    path: '/',\n    component: Main,\n    redirect: '/login',\n    //子路由\n    children: [{\n      path: 'home',\n      component: Home,\n      meta: {\n        role: ['1']\n      }\n    }, {\n      path: 'userhome',\n      component: UserHome,\n      meta: {\n        role: ['2']\n      }\n    }, {\n      path: 'lineprocess',\n      component: LineProcess,\n      meta: {\n        role: ['1']\n      }\n    }, {\n      path: 'userlineprocess',\n      component: UserLineProcess,\n      meta: {\n        role: ['2']\n      }\n    }, {\n      path: 'lineProcessManagement',\n      component: LineProcessManagement,\n      meta: {\n        role: ['1', '2']\n      }\n    }, {\n      path: 'prepayroll',\n      component: PrePayroll,\n      meta: {\n        role: ['2']\n      }\n    },\n    // {path: 'payroll',component: Payroll,meta:{role:['2']}},\n    {\n      path: 'linepurchase',\n      component: LinePurchase,\n      meta: {\n        role: ['1']\n      }\n    }, {\n      path: 'lineshipping',\n      component: LineShipping,\n      meta: {\n        role: ['1']\n      }\n    },\n    // {path: 'linereturn',component: LineReturn,meta:{role:['1']}},\n    {\n      path: 'linemanagement',\n      component: LineManagement,\n      meta: {\n        role: ['1']\n      }\n    }, {\n      path: 'payrollmanagement',\n      component: PayrollManagement,\n      meta: {\n        role: ['1']\n      }\n    }, {\n      path: 'workermanagement',\n      component: WorkerManagement,\n      meta: {\n        role: ['1']\n      }\n    }, {\n      path: 'accountManagement',\n      component: AccountManagement,\n      meta: {\n        role: ['1']\n      }\n    }\n    // {path: 'userInfo',component: UserInfo,meta:{role:['1', '2']}},\n    ]\n  }, {\n    path: '/login',\n    component: Login\n  }]\n});\n// 全局前置路由守衛————初始化的時候被調用、每次路由切換之前被調用\nrouter.beforeEach(function (to, from, next) {\n  var token = localStorage.getItem('token');\n  var role = localStorage.getItem('role');\n  if (!token && to.path !== '/login') {\n    //若沒有token，前往的頁面只能為login，不然會無限跳轉login頁面\n    next({\n      path: '/login'\n    });\n  } else if (token && to.path === '/login') {\n    //有token時，若前往的頁面為login頁面，則跳到home頁面，避免重複登入\n    next({\n      path: \"\".concat(role === '1' ? '/home' : '/userhome')\n    });\n  } else if (token && !to.meta.role.includes(role) && to.path !== '/home') {\n    //有token時，但沒有權限時，跳到home頁面，避免用戶使用url直接跳轉\n    next({\n      path: \"\".concat(role === '1' ? '/home' : '/userhome')\n    });\n  } else {\n    next(); //正常訪問\n  }\n});\n\nexport default router;",{"version":3,"names":["VueRouter","Home","UserHome","LineManagement","LineProcess","UserLineProcess","LineProcessManagement","LinePurchase","LineShipping","Login","PayrollManagement","PrePayroll","WorkerManagement","AccountManagement","Main","originalPush","prototype","push","location","call","catch","err","router","routes","path","component","redirect","children","meta","role","beforeEach","to","from","next","token","localStorage","getItem","concat","includes"],"sources":["D:/develop_tools/work/maven-work/Yansol/msystem-web/src/router/index.js"],"sourcesContent":["//導入vue router\r\nimport VueRouter from 'vue-router'\r\nimport Home from '../views/Home'\r\nimport UserHome from '../views/UserHome'\r\nimport LineManagement from '../views/LineManagement'\r\nimport LineProcess from '../views/LineProcess'\r\nimport UserLineProcess from '../views/UserLineProcess'\r\nimport LineProcessManagement from '../views/LineProcessManagement'\r\nimport LinePurchase from '../views/LinePurchase'\r\n// import LineReturn from '../views/LineReturn'\r\nimport LineShipping from '../views/LineShipping'\r\nimport Login from '../views/Login'\r\n// import Payroll from '../views/Payroll'\r\nimport PayrollManagement from '../views/PayrollManagement'\r\nimport PrePayroll from '../views/PrePayroll'\r\nimport WorkerManagement from '../views/WorkerManagement'\r\nimport AccountManagement from '../views/AccountManagement'\r\n// import UserInfo from '../views/UserInfo'\r\nimport Main from '../views/Main'\r\n\r\n//解決點擊兩次element ui的麵包屑報錯\r\nconst originalPush = VueRouter.prototype.push\r\nVueRouter.prototype.push = function push(location) {\r\n    return originalPush.call(this, location).catch(err => err)\r\n}\r\n\r\nconst router = new VueRouter({\r\n    routes:[\r\n        {   path:'/',\r\n            component:Main,\r\n            redirect: '/login',\r\n            //子路由\r\n            children:[\r\n                {path: 'home',component: Home,meta:{role: ['1']}},\r\n                {path: 'userhome',component: UserHome,meta:{role: ['2']}},\r\n                {path: 'lineprocess',component: LineProcess,meta:{role: ['1']}},\r\n                {path: 'userlineprocess',component: UserLineProcess,meta:{role: ['2']}},\r\n                {path: 'lineProcessManagement',component: LineProcessManagement,meta:{role: ['1', '2']}},\r\n                {path: 'prepayroll',component: PrePayroll,meta:{role:['2']}},\r\n                // {path: 'payroll',component: Payroll,meta:{role:['2']}},\r\n                {path: 'linepurchase',component: LinePurchase,meta:{role:['1']}},\r\n                {path: 'lineshipping',component: LineShipping,meta:{role:['1']}},\r\n                // {path: 'linereturn',component: LineReturn,meta:{role:['1']}},\r\n                {path: 'linemanagement',component: LineManagement,meta:{role:['1']}},\r\n                {path: 'payrollmanagement',component: PayrollManagement,meta:{role:['1']}},\r\n                {path: 'workermanagement',component: WorkerManagement,meta:{role:['1']}},\r\n                {path: 'accountManagement',component: AccountManagement,meta:{role:['1']}},\r\n                // {path: 'userInfo',component: UserInfo,meta:{role:['1', '2']}},\r\n            ]\r\n        },\r\n        {\r\n            path: '/login',\r\n            component: Login\r\n        },\r\n    ]\r\n})\r\n// 全局前置路由守衛————初始化的時候被調用、每次路由切換之前被調用\r\nrouter.beforeEach((to, from, next) => {\r\n    let token = localStorage.getItem('token');\r\n    let role = localStorage.getItem('role');\r\n        if (!token && to.path !== '/login') { //若沒有token，前往的頁面只能為login，不然會無限跳轉login頁面\r\n            next({path: '/login'})\r\n        } else if (token && to.path === '/login') { //有token時，若前往的頁面為login頁面，則跳到home頁面，避免重複登入\r\n            next({path: `${role === '1'?'/home' : '/userhome' }`})\r\n        } else if (token && !to.meta.role.includes(role) && to.path !== '/home') { //有token時，但沒有權限時，跳到home頁面，避免用戶使用url直接跳轉\r\n            next({path: `${role === '1'?'/home' : '/userhome' }`})\r\n        } else {\r\n            next()  //正常訪問\r\n        }\r\n})\r\n\r\nexport default router;"],"mappings":"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"}]}