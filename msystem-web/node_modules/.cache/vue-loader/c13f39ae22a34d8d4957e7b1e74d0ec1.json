{"remainingRequest":"D:\\develop_tools\\work\\maven-work\\Yansol\\msystem-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\develop_tools\\work\\maven-work\\Yansol\\msystem-web\\src\\views\\Home.vue?vue&type=style&index=0&id=fae5bece&scoped=true&lang=css&","dependencies":[{"path":"D:\\develop_tools\\work\\maven-work\\Yansol\\msystem-web\\src\\views\\Home.vue","mtime":1682321451536},{"path":"D:\\develop_tools\\work\\maven-work\\Yansol\\msystem-web\\node_modules\\css-loader\\index.js","mtime":1681747152947},{"path":"D:\\develop_tools\\work\\maven-work\\Yansol\\msystem-web\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1681747162650},{"path":"D:\\develop_tools\\work\\maven-work\\Yansol\\msystem-web\\node_modules\\postcss-loader\\src\\index.js","mtime":1681747156392},{"path":"D:\\develop_tools\\work\\maven-work\\Yansol\\msystem-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1681747155761},{"path":"D:\\develop_tools\\work\\maven-work\\Yansol\\msystem-web\\node_modules\\vue-loader\\lib\\index.js","mtime":1681747158581}],"contextDependencies":[],"result":["\r\n.user {\r\n  padding-bottom: 20px;\r\n  margin-bottom: 20px;\r\n  border-bottom: 1px solid #ccc;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n.user img {\r\n  margin-right: 40px;\r\n  width: 150px;\r\n  height: 150px;\r\n  border-radius: 50%;\r\n}\r\n.user .userinfo .name {\r\n  font-size: 32px;\r\n  margin-bottom: 10px;\r\n}\r\n.user .userinfo .access {\r\n  color: #999999;\r\n}\r\n.tablename {\r\n  font-size: 18px;\r\n  margin-bottom: 10px;\r\n  margin-top: 0px;\r\n  text-align: left;\r\n  font-weight: bold;\r\n  margin-left: 10px;\r\n  /*color: #999999;*/\r\n}\r\n.login-info p {\r\n  line-height: 28px;\r\n  font-size: 14px;\r\n  color: #999999;\r\n}\r\n.login-info p span {\r\n  color: #666666;\r\n  margin-left: 60px;\r\n}\r\n.num {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  justify-content: space-between;\r\n}\r\n.num .icon {\r\n  width: 80px;\r\n  height: 80px;\r\n  font-size: 30px;\r\n  text-align: center;\r\n  line-height: 80px;\r\n  color: #fff;\r\n}\r\n.num .detail {\r\n  margin-left: 15px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  height: 80px;\r\n}\r\n.num .detail .price {\r\n  font-size: 30px;\r\n  margin-bottom: 10px;\r\n  margin-top: 20px;\r\n  line-height: 30px;\r\n  height: 30px;\r\n}\r\n.num .detail .desc {\r\n  font-size: 14px;\r\n  color: #999;\r\n  text-align: center;\r\n  margin-top: 0;\r\n}\r\n.num .el-card {\r\n  width: 24%;\r\n  margin-bottom: 20px;\r\n}\r\n.graph {\r\n  margin-top: 20px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n.graph .el-card {\r\n  width: 48%;\r\n}\r\n.echarts2 , .echarts3 {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center\r\n}\r\n",{"version":3,"sources":["Home.vue"],"names":[],"mappings":";AA0bA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Home.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <el-row>\r\n    <el-col :span=\"8\" style=\"padding-right: 10px\">\r\n      <el-card class=\"box-card\">\r\n        <div class=\"user\">\r\n          <img src=\"../assets/images/male.png\" alt=\"\">\r\n          <div class=\"userinfo\">\r\n            <p class=\"name\">Admin</p>\r\n            <p class=\"access\">超级管理员</p>\r\n          </div>\r\n        </div>\r\n        <div class=\"login-info\">\r\n          <p>上次登录时间：<span>2021-7-19</span></p>\r\n        </div>\r\n      </el-card>\r\n      <el-card style=\"margin-top: 20px;height: 620px;\">\r\n<!--        <div slot=\"header\" class=\"clearfix\">-->\r\n<!--          <span>待完成線材清單</span>-->\r\n<!--        </div>-->\r\n<!--        <p class=\"tablename\">《 待完成線材清單 》</p>-->\r\n        <el-table\r\n            :data=\"goodData\"\r\n            height=\"580\"\r\n            stripe\r\n            size=\"small\"\r\n            style=\"width: 100%\">\r\n          <el-table-column\r\n              prop=\"pdate\"\r\n              label=\"進貨日期\"\r\n              width=\"90\">\r\n          </el-table-column>\r\n          <el-table-column\r\n              prop=\"company.companyName\"\r\n              label=\"廠商\"\r\n              width=\"60\">\r\n          </el-table-column>\r\n          <el-table-column\r\n              prop=\"lineName\"\r\n              label=\"品名\">\r\n          </el-table-column>\r\n          <el-table-column\r\n              prop=\"lineType\"\r\n              label=\"端子\"\r\n              width=\"160\">\r\n          </el-table-column>\r\n          <el-table-column\r\n              prop=\"totalCount\"\r\n              label=\"數量\"\r\n              width=\"60\">\r\n          </el-table-column>\r\n        </el-table>\r\n      </el-card>\r\n     </el-col>\r\n    <el-col :span=\"16\" style=\"padding-left: 10px\">\r\n      <div class=\"num\">\r\n        <el-card v-for=\"item in countData\" :key=\"item.name\" :body-style=\"{ display: 'flex', padding: 0 }\">\r\n          <i class=\"icon\" :class=\"`el-icon-${item.icon}`\" :style=\"{ background: item.color }\"></i>\r\n          <div class=\"detail\">\r\n            <p class=\"price\" v-if=\"item.icon === 'coin'\">{{ item.value }}  元</p>\r\n            <p class=\"price\" v-if=\"item.icon !== 'coin'\">{{ item.value }}  件</p>\r\n            <p class=\"desc\">{{ item.name }}</p>\r\n          </div>\r\n        </el-card>\r\n      </div>\r\n      <el-card style=\"height: 350px\">\r\n        <!-- 折线图 -->\r\n        <div ref=\"echarts1\" class=\"echarts3\" style=\"height: 350px\"></div>\r\n      </el-card>\r\n      <div class=\"graph\">\r\n        <el-card style=\"height: 340px\">\r\n          <div ref=\"echarts2\" class=\"echarts3\" style=\"height: 340px\"></div>\r\n        </el-card>\r\n        <el-card style=\"height: 340px\">\r\n          <div ref=\"echarts3\" class=\"echarts3\" style=\"height: 340px\"></div>\r\n        </el-card>\r\n      </div>\r\n    </el-col>\r\n  </el-row>\r\n</template>\r\n\r\n<script>\r\nimport * as echarts from 'echarts';\r\nimport _ from 'lodash';\r\nimport {getCompanyData, getData, getEmployeeData, getGoodData} from \"../api\";\r\nexport default {\r\n  name:'Home',\r\n  data() {\r\n    return {\r\n      goodData: [],\r\n      companyData: [],\r\n      countData: [\r\n        {\r\n          name: \"今日進貨\",\r\n          value: 1234,\r\n          icon: \"success\",\r\n          color: \"#2ec7c9\",\r\n        },\r\n        {\r\n          name: \"今日出貨\",\r\n          value: 210,\r\n          icon: \"truck\",\r\n          color: \"#ffb980\",\r\n        },\r\n        {\r\n          name: \"今日退貨\",\r\n          value: 1234,\r\n          icon: \"message-solid\",\r\n          color: \"#c55aef\",\r\n        },\r\n        {\r\n          name: \"今日應收款\",\r\n          value: 1234,\r\n          icon: \"coin\",\r\n          color: \"#5ab1ef\",\r\n        },\r\n        {\r\n          name: \"本月進貨\",\r\n          value: 1234,\r\n          icon: \"success\",\r\n          color: \"#2ec7c9\",\r\n        },\r\n        {\r\n          name: \"本月出貨\",\r\n          value: 210,\r\n          icon: \"truck\",\r\n          color: \"#ffb980\",\r\n        },\r\n        {\r\n          name: \"本月退貨\",\r\n          value: 1234,\r\n          icon: \"message-solid\",\r\n          color: \"#c55aef\",\r\n        },\r\n        {\r\n          name: \"本月應收款\",\r\n          value: 1234,\r\n          icon: \"coin\",\r\n          color: \"#5ab1ef\",\r\n        },\r\n      ]\r\n    }\r\n  },\r\n  // computed:{\r\n  //   chartOption(){\r\n  //     let dataList = this.companyData.map(c => ({ ...c, total_sales: 0 }));\r\n  //     console.log('@@',this.companyData)\r\n  //     for (let i = 0; i < this.goodData.length; i++) {\r\n  //       let item = this.goodData[i];\r\n  //       let company = dataList.find(c => c.company_id === item.company_id);\r\n  //       if (company) {\r\n  //         company.total_sales += item.sales;\r\n  //         console.log('@@',company.total_sales)\r\n  //       }\r\n  //     }\r\n  //     return{\r\n  //\r\n  //       title: {\r\n  //         text: '廠商收入'\r\n  //       },\r\n  //       tooltip: {},\r\n  //       legend: {\r\n  //         data: ['2019','2020']\r\n  //       },\r\n  //       xAxis: {\r\n  //         data: ['瑞城達', '尚通', '順盈', '連和', '承惠']\r\n  //       },\r\n  //       yAxis: {\r\n  //         type: 'value',\r\n  //         name: '營收/(仟)'\r\n  //       },\r\n  //       series: [\r\n  //         {\r\n  //           name: '2019',\r\n  //           type: 'bar',\r\n  //           barGap: '20%',\r\n  //           barCategoryGap: '40%',\r\n  //           data: [5, 20, 36, 10, 10]\r\n  //         },\r\n  //         {\r\n  //           name: '2020',\r\n  //           type: 'bar',\r\n  //           data: [15, 30, 56, 30, 30]\r\n  //         }\r\n  //       ]\r\n  //     }\r\n  //   }\r\n  // },\r\n  created() {\r\n    getGoodData().then(\r\n        response => {\r\n          console.log(response.data);\r\n          this.goodData = response.data;\r\n\r\n        },\r\n        error => {\r\n          alert(error.message)\r\n        }\r\n    )\r\n    getCompanyData().then(\r\n        response => {\r\n          let dataList = response.data.map(c => ({ ...c, total_sales: 0 }));\r\n          for (let i = 0; i < this.goodData.length; i++) {\r\n            let item = this.goodData[i];\r\n            let company = dataList.find(c => c.companyId === item.company.companyId);\r\n            if (company) {\r\n              company.total_sales += item.totalPrice;\r\n            }\r\n          }\r\n          this.companyData = dataList;\r\n          console.log('!!',this.companyData.map(company => company.companyName))\r\n          myChart2.setOption({\r\n            xAxis: {\r\n              data: ['1','1','1','1','1']\r\n            },\r\n          });\r\n        },\r\n        error => {\r\n          alert(error.message)\r\n        }\r\n    )\r\n\r\n\r\n  },\r\n  mounted() {\r\n\r\n    getGoodData().then(\r\n        response => {\r\n          let goodDataList = response.data.map(c => ({\r\n            ...c,\r\n            total_sales_this_jan: 0,\r\n            total_sales_this_feb: 0,\r\n            total_sales_this_mar: 0,\r\n            total_sales_this_apr: 0,\r\n            total_sales_this_may: 0,\r\n            total_sales_this_jun: 0,\r\n            total_sales_this_jul: 0,\r\n            total_sales_this_aug: 0,\r\n            total_sales_this_sep: 0,\r\n            total_sales_this_oct: 0,\r\n            total_sales_this_nov: 0,\r\n            total_sales_this_dec: 0,\r\n            total_sales_last_jan: 0,\r\n            total_sales_last_feb: 0,\r\n            total_sales_last_mar: 0,\r\n            total_sales_last_apr: 0,\r\n            total_sales_last_may: 0,\r\n            total_sales_last_jun: 0,\r\n            total_sales_last_jul: 0,\r\n            total_sales_last_aug: 0,\r\n            total_sales_last_sep: 0,\r\n            total_sales_last_oct: 0,\r\n            total_sales_last_nov: 0,\r\n            total_sales_last_dec: 0,\r\n          }));\r\n\r\n          console.log(response.data);\r\n          this.goodData = response.data;\r\n\r\n        },\r\n        error => {\r\n          alert(error.message)\r\n        }\r\n    )\r\n    getCompanyData().then(\r\n        response => {\r\n          let companyDataList = response.data.map(c => ({ ...c, total_sales_this_year: 0,total_sales_last_year: 0 }));\r\n          for (let i = 0; i < this.goodData.length; i++) {\r\n            let item = this.goodData[i];\r\n            let currentYear = new Date().getFullYear();\r\n            let lastYear = currentYear-1;\r\n            console.log(item.pDate.includes(currentYear));\r\n            if(item.pDate.includes(currentYear)){\r\n              let company = companyDataList.find(c => c.companyId === item.company.companyId );\r\n              if (company) {\r\n                company.total_sales_this_year += item.totalPrice;\r\n              }\r\n            }else if(item.pDate.includes(lastYear)){\r\n              let companyLastYear = companyDataList.find(c => c.companyId === item.company.companyId );\r\n              if (companyLastYear) {\r\n                companyLastYear.total_sales_last_year += item.totalPrice;\r\n              }\r\n            }\r\n          }\r\n          this.companyData = companyDataList;\r\n          console.log('!!',this.companyData)\r\n          myChart2.setOption({\r\n            xAxis: {\r\n              data: this.companyData.map(company => company.companyName)\r\n            },\r\n            series: [\r\n              {\r\n                name: '2019',\r\n                data: this.companyData.map(company => company.total_sales_last_year / 1000)\r\n              },\r\n              {\r\n                name: '2020',\r\n                data: this.companyData.map(company => company.total_sales_this_year / 1000)\r\n              }\r\n            ]\r\n          });\r\n        },\r\n        error => {\r\n          alert(error.message)\r\n        }\r\n    )\r\n\r\n    // getEmployeeData().then(\r\n    //     response => {\r\n    //       console.log(response.data);\r\n    //       this.tableData = response.data;\r\n    //\r\n    //     },\r\n    //     error => {\r\n    //       alert(error.message)\r\n    //     }\r\n    // )\r\n    // 基於準備好的dom，初始化echarts實例\r\n    var myChart1 = echarts.init(this.$refs.echarts1);\r\n    // 繪製圖表1\r\n    myChart1.setOption({\r\n      title: {\r\n        text: '每月營收'\r\n      },\r\n      tooltip: {},\r\n      legend: {\r\n        data: ['2019','2020']\r\n      },\r\n      xAxis: {\r\n        data: ['1月', '2月', '3月', '4月', '5月', '6月', '7月', '8月', '9月', '10月', '11月', '12月']\r\n      },\r\n      yAxis: {\r\n        type: 'value',\r\n        name: '營收/(仟)'\r\n      },\r\n      series: [\r\n        {\r\n          name: '2019',\r\n          type: 'line',\r\n          data: [5, 20, 36, 10, 10, 20, 20, 36, 10, 10, 20, 20]\r\n        },\r\n        {\r\n          name: '2020',\r\n          type: 'line',\r\n          data: [15, 30, 56, 30, 30, 20, 10, 56, 50, 20, 10, 30]\r\n        }\r\n      ]\r\n    });\r\n    // 基於準備好的dom，初始化echarts實例\r\n    var myChart2 = echarts.init(this.$refs.echarts2);\r\n    // 繪製圖表2\r\n    myChart2.setOption({\r\n      title: {\r\n        text: '廠商收入'\r\n      },\r\n      tooltip: {},\r\n      legend: {\r\n        data: ['2019','2020']\r\n      },\r\n      xAxis: {\r\n        data: []\r\n      },\r\n      yAxis: {\r\n        type: 'value',\r\n        name: '營收/(仟)'\r\n      },\r\n      series: [\r\n        {\r\n          name: '2019',\r\n          type: 'bar',\r\n          barGap: '20%',\r\n          barCategoryGap: '40%',\r\n          data: []\r\n        },\r\n        {\r\n          name: '2020',\r\n          type: 'bar',\r\n          data: []\r\n        }\r\n      ]\r\n    });\r\n\r\n    // 基於準備好的dom，初始化echarts實例\r\n    var myChart3 = echarts.init(this.$refs.echarts3);\r\n    // 繪製圖表3\r\n    myChart3.setOption({\r\n      title: {\r\n        text: '員工收入'\r\n      },\r\n      series: [\r\n        {\r\n          type: 'pie',\r\n          data: [\r\n            {\r\n              value: 10,\r\n              name: '趙一'\r\n            },\r\n            {\r\n              value: 15,\r\n              name: '馬二'\r\n            },\r\n            {\r\n              value: 15,\r\n              name: '張三'\r\n            },\r\n            {\r\n              value: 10,\r\n              name: '李四'\r\n            },\r\n            {\r\n              value: 20,\r\n              name: '王五'\r\n            },\r\n            {\r\n              value: 30,\r\n              name: '陳六'\r\n            },\r\n            {\r\n              value: 25,\r\n              name: '朱七'\r\n            },\r\n            {\r\n              value: 15,\r\n              name: '黃八'\r\n            },\r\n            {\r\n              value: 5,\r\n              name: '劉九'\r\n            },\r\n            {\r\n              value: 5,\r\n              name: '李十'\r\n            }\r\n          ]\r\n        }\r\n      ]\r\n    });\r\n\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.user {\r\n  padding-bottom: 20px;\r\n  margin-bottom: 20px;\r\n  border-bottom: 1px solid #ccc;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n.user img {\r\n  margin-right: 40px;\r\n  width: 150px;\r\n  height: 150px;\r\n  border-radius: 50%;\r\n}\r\n.user .userinfo .name {\r\n  font-size: 32px;\r\n  margin-bottom: 10px;\r\n}\r\n.user .userinfo .access {\r\n  color: #999999;\r\n}\r\n.tablename {\r\n  font-size: 18px;\r\n  margin-bottom: 10px;\r\n  margin-top: 0px;\r\n  text-align: left;\r\n  font-weight: bold;\r\n  margin-left: 10px;\r\n  /*color: #999999;*/\r\n}\r\n.login-info p {\r\n  line-height: 28px;\r\n  font-size: 14px;\r\n  color: #999999;\r\n}\r\n.login-info p span {\r\n  color: #666666;\r\n  margin-left: 60px;\r\n}\r\n.num {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  justify-content: space-between;\r\n}\r\n.num .icon {\r\n  width: 80px;\r\n  height: 80px;\r\n  font-size: 30px;\r\n  text-align: center;\r\n  line-height: 80px;\r\n  color: #fff;\r\n}\r\n.num .detail {\r\n  margin-left: 15px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  height: 80px;\r\n}\r\n.num .detail .price {\r\n  font-size: 30px;\r\n  margin-bottom: 10px;\r\n  margin-top: 20px;\r\n  line-height: 30px;\r\n  height: 30px;\r\n}\r\n.num .detail .desc {\r\n  font-size: 14px;\r\n  color: #999;\r\n  text-align: center;\r\n  margin-top: 0;\r\n}\r\n.num .el-card {\r\n  width: 24%;\r\n  margin-bottom: 20px;\r\n}\r\n.graph {\r\n  margin-top: 20px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n.graph .el-card {\r\n  width: 48%;\r\n}\r\n.echarts2 , .echarts3 {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center\r\n}\r\n</style>"]}]}