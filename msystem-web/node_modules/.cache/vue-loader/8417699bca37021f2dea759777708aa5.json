{"remainingRequest":"D:\\develop_tools\\work\\maven-work\\Yansol\\msystem-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\develop_tools\\work\\maven-work\\Yansol\\msystem-web\\src\\views\\Home.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\develop_tools\\work\\maven-work\\Yansol\\msystem-web\\src\\views\\Home.vue","mtime":1683604487271},{"path":"D:\\develop_tools\\work\\maven-work\\Yansol\\msystem-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1681747155761},{"path":"D:\\develop_tools\\work\\maven-work\\Yansol\\msystem-web\\node_modules\\babel-loader\\lib\\index.js","mtime":1681747156896},{"path":"D:\\develop_tools\\work\\maven-work\\Yansol\\msystem-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1681747155761},{"path":"D:\\develop_tools\\work\\maven-work\\Yansol\\msystem-web\\node_modules\\vue-loader\\lib\\index.js","mtime":1681747158581}],"contextDependencies":[],"result":["\r\nimport * as echarts from 'echarts';\r\nimport { mapGetters,mapActions,mapState,mapMutations } from 'vuex'\r\nexport default {\r\n  name:'Home',\r\n  data() {\r\n    return {\r\n      employee: {},\r\n      lastLoginTime: '',\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState('data',['goodData','companyData','employeeData','orderData','returnData','countData']),\r\n    ...mapGetters('data',[\r\n      'lastYear',\r\n      'currentYear',\r\n      'monthlyRevenue',\r\n      'companySalesList',\r\n      'employeeSalesList',\r\n      'monthlyPurchaseList',\r\n      'dailyPurchaseList',\r\n      'monthlyShipList',\r\n      'dailyShipList',\r\n      'monthlyReturnList',\r\n      'dailyReturnList',\r\n      'monthlyAccountsReceivable',\r\n      'dailyAccountsReceivable',\r\n    ]),\r\n  },\r\n  created() {\r\n    this.fetchGoodData();\r\n    this.fetchCompanyData();\r\n    this.fetchEmployeeData();\r\n    this.fetchOrderData();\r\n    this.fetchReturnData();\r\n  },\r\n  methods:{\r\n    ...mapActions('data',['fetchGoodData','fetchCompanyData','fetchEmployeeData','fetchOrderData','fetchReturnData']),\r\n    renderChart(){\r\n      // 基於準備好的dom，初始化echarts實例\r\n      var myChart1 = echarts.init(this.$refs.echarts1);\r\n      // 配製圖表1\r\n      myChart1.setOption({\r\n        title: {\r\n          text: '每月營收'\r\n        },\r\n        tooltip: {},\r\n        legend: {\r\n          data: [this.lastYear.toString(),this.currentYear.toString()]\r\n        },\r\n        xAxis: {\r\n          data: ['1月', '2月', '3月', '4月', '5月', '6月', '7月', '8月', '9月', '10月', '11月', '12月']\r\n        },\r\n        yAxis: {\r\n          type: 'value',\r\n          name: '營收/(仟)'\r\n        },\r\n        series: [\r\n          {\r\n            name: this.lastYear,\r\n            type: 'line',\r\n            data: [\r\n              this.monthlyRevenue[`${this.lastYear}-01`],\r\n              this.monthlyRevenue[`${this.lastYear}-02`],\r\n              this.monthlyRevenue[`${this.lastYear}-03`],\r\n              this.monthlyRevenue[`${this.lastYear}-04`],\r\n              this.monthlyRevenue[`${this.lastYear}-05`],\r\n              this.monthlyRevenue[`${this.lastYear}-06`],\r\n              this.monthlyRevenue[`${this.lastYear}-07`],\r\n              this.monthlyRevenue[`${this.lastYear}-08`],\r\n              this.monthlyRevenue[`${this.lastYear}-09`],\r\n              this.monthlyRevenue[`${this.lastYear}-010`],\r\n              this.monthlyRevenue[`${this.lastYear}-011`],\r\n              this.monthlyRevenue[`${this.lastYear}-012`]]\r\n          },\r\n          {\r\n            name: this.currentYear,\r\n            type: 'line',\r\n            data: [\r\n              this.monthlyRevenue[`${this.currentYear}-01`],\r\n              this.monthlyRevenue[`${this.currentYear}-02`],\r\n              this.monthlyRevenue[`${this.currentYear}-03`],\r\n              this.monthlyRevenue[`${this.currentYear}-04`],\r\n              this.monthlyRevenue[`${this.currentYear}-05`],\r\n              this.monthlyRevenue[`${this.currentYear}-06`],\r\n              this.monthlyRevenue[`${this.currentYear}-07`],\r\n              this.monthlyRevenue[`${this.currentYear}-08`],\r\n              this.monthlyRevenue[`${this.currentYear}-09`],\r\n              this.monthlyRevenue[`${this.currentYear}-010`],\r\n              this.monthlyRevenue[`${this.currentYear}-011`],\r\n              this.monthlyRevenue[`${this.currentYear}-012`]]\r\n          }\r\n        ]\r\n      });\r\n      // 基於準備好的dom，初始化echarts實例\r\n      var myChart2 = echarts.init(this.$refs.echarts2);\r\n      // 配製圖表2\r\n      myChart2.setOption({\r\n        title: {\r\n          text: '廠商收入'\r\n        },\r\n        tooltip: {},\r\n        legend: {\r\n          data: [this.lastYear.toString(),this.currentYear.toString()]\r\n        },\r\n        xAxis: {\r\n          data: this.companySalesList.map(company => company.companyName)\r\n        },\r\n        yAxis: {\r\n          type: 'value',\r\n          name: '營收/(仟)'\r\n        },\r\n        series: [\r\n          {\r\n            name: this.lastYear,\r\n            type: 'bar',\r\n            barGap: '20%',\r\n            barCategoryGap: '40%',\r\n            data: this.companySalesList.map(company => company.total_sales_last_year / 1000)\r\n          },\r\n          {\r\n            name: this.currentYear,\r\n            type: 'bar',\r\n            data: this.companySalesList.map(company => company.total_sales_this_year / 1000)\r\n          }\r\n        ]\r\n      });\r\n      // 基於準備好的dom，初始化echarts實例\r\n      var myChart3 = echarts.init(this.$refs.echarts3);\r\n      // 配製圖表3\r\n      myChart3.setOption({\r\n        title: {\r\n          text: '員工收入'\r\n        },\r\n        tooltip: {\r\n          trigger: 'item',\r\n          formatter: '{b}: {c} 元 ({d}%)'\r\n        },\r\n        series: [\r\n          {\r\n            type: 'pie',\r\n            data: this.employeeSalesList,\r\n\r\n            label: {\r\n              show: true,\r\n              formatter: '{b}: {c} 元'\r\n            },\r\n          }\r\n        ]\r\n\r\n      });\r\n\r\n      //綁定countDate數據\r\n      this.countData[0].value = this.dailyPurchaseList.length;\r\n      this.countData[1].value = this.dailyShipList.length;\r\n      this.countData[2].value = this.dailyReturnList.length;\r\n      this.countData[3].value = this.dailyAccountsReceivable;\r\n      this.countData[4].value = this.monthlyPurchaseList.length;\r\n      this.countData[5].value = this.monthlyShipList.length;\r\n      this.countData[6].value = this.monthlyReturnList.length;\r\n      this.countData[7].value = this.monthlyAccountsReceivable;\r\n    },\r\n  },\r\n  mounted() {\r\n    //使用定時器確保vuex異步取得數據後，再進行渲染\r\n    setTimeout(() => {\r\n      this.renderChart();\r\n    }, 1000);\r\n    //獲取localStorage保存的此帳號對應的員工信息\r\n    this.employee = JSON.parse(localStorage.getItem(\"employee\"));\r\n    //獲取localStorage保存的此帳號上次登入時間\r\n    this.lastLoginTime = localStorage.getItem(\"lastLoginTime\").substr(0, 10);\r\n  },\r\n}\r\n",{"version":3,"sources":["Home.vue"],"names":[],"mappings":";AA+EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Home.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <el-row>\r\n    <el-col :span=\"9\" style=\"padding-right: 10px\">\r\n      <el-card class=\"box-card\" style=\"height: 255px\">\r\n        <div class=\"user\">\r\n          <img src=\"../assets/images/male.png\" alt=\"\">\r\n          <div class=\"userinfo\">\r\n            <p class=\"name\">{{employee.name}}</p>\r\n            <p class=\"access\">超级管理员</p>\r\n          </div>\r\n        </div>\r\n        <div class=\"login-info\">\r\n          <p>上次登錄時間：<span>{{lastLoginTime}}</span></p>\r\n        </div>\r\n      </el-card>\r\n      <el-card style=\"margin-top: 20px;height: 550px;\">\r\n        <el-table\r\n            :data=\"goodData\"\r\n            height=\"510\"\r\n            stripe\r\n            size=\"small\"\r\n            style=\"width: 100%\">\r\n          <el-table-column\r\n              prop=\"pdate\"\r\n              label=\"進貨日期\"\r\n              width=\"85\">\r\n          </el-table-column>\r\n          <el-table-column\r\n              prop=\"company.companyName\"\r\n              label=\"廠商\"\r\n              width=\"60\">\r\n          </el-table-column>\r\n          <el-table-column\r\n              prop=\"lineName\"\r\n              label=\"品名\">\r\n          </el-table-column>\r\n          <el-table-column\r\n              prop=\"lineType\"\r\n              label=\"端子\"\r\n              width=\"170\">\r\n          </el-table-column>\r\n          <el-table-column\r\n              prop=\"totalCount\"\r\n              label=\"數量\"\r\n              width=\"50\">\r\n          </el-table-column>\r\n        </el-table>\r\n      </el-card>\r\n     </el-col>\r\n    <el-col :span=\"15\" style=\"padding-left: 10px\">\r\n      <div class=\"num\">\r\n        <el-card v-for=\"item in countData\" :key=\"item.name\" :body-style=\"{ display: 'flex', padding: 0 }\">\r\n          <i class=\"icon\" :class=\"`el-icon-${item.icon}`\" :style=\"{ background: item.color }\"></i>\r\n          <div class=\"detail\">\r\n            <p class=\"price\" v-if=\"item.icon === 'coin'\">{{ item.value }}  元</p>\r\n            <p class=\"price\" v-if=\"item.icon !== 'coin'\">{{ item.value }}  件</p>\r\n            <p class=\"desc\">{{ item.name }}</p>\r\n          </div>\r\n        </el-card>\r\n      </div>\r\n      <el-card style=\"height: 300px\">\r\n        <!-- 每月營收折線圖 -->\r\n        <div ref=\"echarts1\" class=\"echarts1\" style=\"height: 320px\"></div>\r\n      </el-card>\r\n      <div class=\"graph\">\r\n        <el-card style=\"height: 340px\">\r\n          <!-- 廠商收入柱狀圖 -->\r\n          <div ref=\"echarts2\" class=\"echarts2\" style=\"height: 340px\"></div>\r\n        </el-card>\r\n        <el-card style=\"height: 340px ; width: 49%\">\r\n          <!-- 員工月收入餅圖 -->\r\n          <div ref=\"echarts3\" class=\"echarts3\" style=\"height: 340px\"></div>\r\n        </el-card>\r\n      </div>\r\n    </el-col>\r\n  </el-row>\r\n</template>\r\n\r\n<script>\r\nimport * as echarts from 'echarts';\r\nimport { mapGetters,mapActions,mapState,mapMutations } from 'vuex'\r\nexport default {\r\n  name:'Home',\r\n  data() {\r\n    return {\r\n      employee: {},\r\n      lastLoginTime: '',\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState('data',['goodData','companyData','employeeData','orderData','returnData','countData']),\r\n    ...mapGetters('data',[\r\n      'lastYear',\r\n      'currentYear',\r\n      'monthlyRevenue',\r\n      'companySalesList',\r\n      'employeeSalesList',\r\n      'monthlyPurchaseList',\r\n      'dailyPurchaseList',\r\n      'monthlyShipList',\r\n      'dailyShipList',\r\n      'monthlyReturnList',\r\n      'dailyReturnList',\r\n      'monthlyAccountsReceivable',\r\n      'dailyAccountsReceivable',\r\n    ]),\r\n  },\r\n  created() {\r\n    this.fetchGoodData();\r\n    this.fetchCompanyData();\r\n    this.fetchEmployeeData();\r\n    this.fetchOrderData();\r\n    this.fetchReturnData();\r\n  },\r\n  methods:{\r\n    ...mapActions('data',['fetchGoodData','fetchCompanyData','fetchEmployeeData','fetchOrderData','fetchReturnData']),\r\n    renderChart(){\r\n      // 基於準備好的dom，初始化echarts實例\r\n      var myChart1 = echarts.init(this.$refs.echarts1);\r\n      // 配製圖表1\r\n      myChart1.setOption({\r\n        title: {\r\n          text: '每月營收'\r\n        },\r\n        tooltip: {},\r\n        legend: {\r\n          data: [this.lastYear.toString(),this.currentYear.toString()]\r\n        },\r\n        xAxis: {\r\n          data: ['1月', '2月', '3月', '4月', '5月', '6月', '7月', '8月', '9月', '10月', '11月', '12月']\r\n        },\r\n        yAxis: {\r\n          type: 'value',\r\n          name: '營收/(仟)'\r\n        },\r\n        series: [\r\n          {\r\n            name: this.lastYear,\r\n            type: 'line',\r\n            data: [\r\n              this.monthlyRevenue[`${this.lastYear}-01`],\r\n              this.monthlyRevenue[`${this.lastYear}-02`],\r\n              this.monthlyRevenue[`${this.lastYear}-03`],\r\n              this.monthlyRevenue[`${this.lastYear}-04`],\r\n              this.monthlyRevenue[`${this.lastYear}-05`],\r\n              this.monthlyRevenue[`${this.lastYear}-06`],\r\n              this.monthlyRevenue[`${this.lastYear}-07`],\r\n              this.monthlyRevenue[`${this.lastYear}-08`],\r\n              this.monthlyRevenue[`${this.lastYear}-09`],\r\n              this.monthlyRevenue[`${this.lastYear}-010`],\r\n              this.monthlyRevenue[`${this.lastYear}-011`],\r\n              this.monthlyRevenue[`${this.lastYear}-012`]]\r\n          },\r\n          {\r\n            name: this.currentYear,\r\n            type: 'line',\r\n            data: [\r\n              this.monthlyRevenue[`${this.currentYear}-01`],\r\n              this.monthlyRevenue[`${this.currentYear}-02`],\r\n              this.monthlyRevenue[`${this.currentYear}-03`],\r\n              this.monthlyRevenue[`${this.currentYear}-04`],\r\n              this.monthlyRevenue[`${this.currentYear}-05`],\r\n              this.monthlyRevenue[`${this.currentYear}-06`],\r\n              this.monthlyRevenue[`${this.currentYear}-07`],\r\n              this.monthlyRevenue[`${this.currentYear}-08`],\r\n              this.monthlyRevenue[`${this.currentYear}-09`],\r\n              this.monthlyRevenue[`${this.currentYear}-010`],\r\n              this.monthlyRevenue[`${this.currentYear}-011`],\r\n              this.monthlyRevenue[`${this.currentYear}-012`]]\r\n          }\r\n        ]\r\n      });\r\n      // 基於準備好的dom，初始化echarts實例\r\n      var myChart2 = echarts.init(this.$refs.echarts2);\r\n      // 配製圖表2\r\n      myChart2.setOption({\r\n        title: {\r\n          text: '廠商收入'\r\n        },\r\n        tooltip: {},\r\n        legend: {\r\n          data: [this.lastYear.toString(),this.currentYear.toString()]\r\n        },\r\n        xAxis: {\r\n          data: this.companySalesList.map(company => company.companyName)\r\n        },\r\n        yAxis: {\r\n          type: 'value',\r\n          name: '營收/(仟)'\r\n        },\r\n        series: [\r\n          {\r\n            name: this.lastYear,\r\n            type: 'bar',\r\n            barGap: '20%',\r\n            barCategoryGap: '40%',\r\n            data: this.companySalesList.map(company => company.total_sales_last_year / 1000)\r\n          },\r\n          {\r\n            name: this.currentYear,\r\n            type: 'bar',\r\n            data: this.companySalesList.map(company => company.total_sales_this_year / 1000)\r\n          }\r\n        ]\r\n      });\r\n      // 基於準備好的dom，初始化echarts實例\r\n      var myChart3 = echarts.init(this.$refs.echarts3);\r\n      // 配製圖表3\r\n      myChart3.setOption({\r\n        title: {\r\n          text: '員工收入'\r\n        },\r\n        tooltip: {\r\n          trigger: 'item',\r\n          formatter: '{b}: {c} 元 ({d}%)'\r\n        },\r\n        series: [\r\n          {\r\n            type: 'pie',\r\n            data: this.employeeSalesList,\r\n\r\n            label: {\r\n              show: true,\r\n              formatter: '{b}: {c} 元'\r\n            },\r\n          }\r\n        ]\r\n\r\n      });\r\n\r\n      //綁定countDate數據\r\n      this.countData[0].value = this.dailyPurchaseList.length;\r\n      this.countData[1].value = this.dailyShipList.length;\r\n      this.countData[2].value = this.dailyReturnList.length;\r\n      this.countData[3].value = this.dailyAccountsReceivable;\r\n      this.countData[4].value = this.monthlyPurchaseList.length;\r\n      this.countData[5].value = this.monthlyShipList.length;\r\n      this.countData[6].value = this.monthlyReturnList.length;\r\n      this.countData[7].value = this.monthlyAccountsReceivable;\r\n    },\r\n  },\r\n  mounted() {\r\n    //使用定時器確保vuex異步取得數據後，再進行渲染\r\n    setTimeout(() => {\r\n      this.renderChart();\r\n    }, 1000);\r\n    //獲取localStorage保存的此帳號對應的員工信息\r\n    this.employee = JSON.parse(localStorage.getItem(\"employee\"));\r\n    //獲取localStorage保存的此帳號上次登入時間\r\n    this.lastLoginTime = localStorage.getItem(\"lastLoginTime\").substr(0, 10);\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.user {\r\n  padding-bottom: 20px;\r\n  margin-bottom: 20px;\r\n  border-bottom: 1px solid #ccc;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n.user img {\r\n  margin-right: 40px;\r\n  width: 150px;\r\n  height: 150px;\r\n  border-radius: 50%;\r\n}\r\n.user .userinfo .name {\r\n  font-size: 32px;\r\n  margin-bottom: 10px;\r\n}\r\n.user .userinfo .access {\r\n  color: #999999;\r\n}\r\n.tablename {\r\n  font-size: 18px;\r\n  margin-bottom: 10px;\r\n  margin-top: 0px;\r\n  text-align: left;\r\n  font-weight: bold;\r\n  margin-left: 10px;\r\n  /*color: #999999;*/\r\n}\r\n.login-info p {\r\n  line-height: 28px;\r\n  font-size: 14px;\r\n  color: #999999;\r\n}\r\n.login-info p span {\r\n  color: #666666;\r\n  margin-left: 60px;\r\n}\r\n.num {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  justify-content: space-between;\r\n}\r\n.num .icon {\r\n  width: 60px;\r\n  height: 60px;\r\n  font-size: 30px;\r\n  text-align: center;\r\n  line-height: 60px;\r\n  color: #fff;\r\n}\r\n.num .detail {\r\n  margin-left: 15px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  height: 60px;\r\n}\r\n.num .detail .price {\r\n  font-size: 24px;\r\n  margin-bottom: 0px;\r\n  margin-top: 20px;\r\n  line-height: 24px;\r\n  height: 24px;\r\n}\r\n.num .detail .desc {\r\n  font-size: 14px;\r\n  color: #999;\r\n  text-align: center;\r\n  margin-top: 0;\r\n}\r\n.num .el-card {\r\n  width: 24%;\r\n  margin-bottom: 20px;\r\n}\r\n.graph {\r\n  margin-top: 20px;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n.graph .el-card {\r\n  width: 48%;\r\n}\r\n.echarts2 , .echarts3 {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center\r\n}\r\n</style>"]}]}